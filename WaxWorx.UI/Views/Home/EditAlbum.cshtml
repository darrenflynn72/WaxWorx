@model WaxWorx.UI.ViewModels.AlbumViewModel

@{
    ViewData["Title"] = "Edit Album";
}

<div class="container bg-dark text-light py-4">
    <div class="d-flex justify-content-between mb-3">
        <div>
            <div class="d-flex align-items-center mb-4">
                <div class="summary-icon text-accent-orange me-3">
                    <i class="bi bi-disc-fill fs-1"></i>
                </div>
                <h2 class="text-info mb-4">Edit Album</h2>
            </div>
        </div>
        <div>
            <a class="btn btn-custom-view mb-3" href="javascript:history.back()">← Back</a>
        </div>
    </div>

    <form asp-action="EditAlbum" method="post" enctype="multipart/form-data">
        <!-- Hidden ID Field -->
        <input type="hidden" name="Id" value="@Model.Id" />
        <input type="hidden" name="ArtistId" value="@Model.ArtistId" />
        <input type="hidden" name="GenreId" value="@Model.GenreId" />

        @*         <!-- Hidden AUDIT Fields for Album -->
        <input type="hidden" name="CreatedBy" value="@Model.CreatedBy" />
        <input type="hidden" name="CreatedDate" value="@Model.CreatedDate" />
        <input type="hidden" name="ModifiedBy" value="@Model.ModifiedBy" />
        <input type="hidden" name="ModifiedDate" value="@Model.ModifiedDate" />

        <!-- Hidden AUDIT Fields for Artist -->
        <input type="hidden" name="Artist.CreatedBy" value="@Model.Artist?.CreatedBy" />
        <input type="hidden" name="Artist.CreatedDate" value="@Model.Artist?.CreatedDate" />
        <input type="hidden" name="Artist.ModifiedBy" value="@Model.Artist?.ModifiedBy" />
        <input type="hidden" name="Artist.ModifiedDate" value="@Model.Artist?.ModifiedDate" />

        <!-- Hidden AUDIT Fields for Genre -->
        <input type="hidden" name="Genre.CreatedBy" value="@Model.Genre?.CreatedBy" />
        <input type="hidden" name="Genre.CreatedDate" value="@Model.Genre?.CreatedDate" />
        <input type="hidden" name="Genre.ModifiedBy" value="@Model.Genre?.ModifiedBy" />
        <input type="hidden" name="Genre.ModifiedDate" value="@Model.Genre?.ModifiedDate" /> *@

        <div class="row mb-3">
            <!-- Title -->
            <div class="col-md-6">
                <label class="form-label text-light" for="Title">Title</label>
                <input type="text" id="Title" name="Title" class="form-control" value="@Model.Title" required />
            </div>

            <!-- Release Year -->
            <div class="col-md-6">
                <label class="form-label text-light" for="Title">Release Year</label>
                <input type="text" id="ReleaseYear" name="ReleaseYear" class="form-control" value="@Model.ReleaseYear" required />
            </div>
        </div>

        <div class="row mb-3">
            <!-- Artist -->
            <div class="col-md-6">
                <label class="form-label text-light" for="ArtistId">Artist</label>
                <select id="ArtistId" name="Artist.Id" class="form-control" required>
                    <option value="@Model.Artist?.Id">@Model.Artist?.Name</option>
                    <!-- Populate with other artist options -->
                </select>
                <input type="hidden" name="Artist.Name" value="@Model.Artist?.Name" /> <!-- Include Name explicitly -->
            </div>

            <!-- Genre -->
            <div class="col-md-6">
                <label class="form-label text-light" for="GenreId">Genre</label>
                <select id="GenreId" name="Genre.Id" class="form-control" required>
                    <option value="@Model.Genre?.Id">@Model.Genre?.Name</option>
                    <!-- Populate with other genre options -->
                </select>
            </div>
            <input type="hidden" name="Genre.Name" value="@Model.Genre?.Name" /> <!-- Include Name explicitly -->
        </div>

        <div class="row mb-3">
            <!-- Number of Discs -->
            <div class="col-md-6">
                <label class="form-label text-light" for="NoOfDiscs">Number of Discs</label>
                <input type="number" id="NoOfDiscs" name="NoOfDiscs" class="form-control" value="@Model.NoOfDiscs" />
            </div>

            <!-- Color -->
            <div class="col-md-6">
                <label class="form-label text-light" for="Color">Color</label>
                <input type="text" id="Color" name="Color" class="form-control" value="@Model.Color" />
            </div>
        </div>

        <div class="row mb-3">
            <!-- Condition -->
            <div class="col-md-6">
                <label class="form-label text-light" for="NoOfDiscs">Condition</label>
                <input type="number" id="Condition" name="Condition" class="form-control" value="@Model.Condition" />
            </div>
        </div>

        <div class="row mb-3">
            <!-- Picture Disc -->
            <div class="col-md-6">
                <div class="form-check">
                    <!-- Hidden field to ensure a value is submitted when checkbox is unchecked -->
                    <input type="hidden" name="PictureDisc" value="false" />
                    <input type="checkbox" id="PictureDisc" name="PictureDisc" class="form-check-input" @(Model.PictureDisc ? "checked" : "") />
                    <label class="form-label text-light" for="PictureDisc" class="form-check-label">Picture Disc</label>
                </div>
            </div>

            <!-- Boxset -->
            <div class="col-md-6">
                <div class="form-check">
                    <!-- Hidden field to ensure a value is submitted when checkbox is unchecked -->
                    <input type="hidden" name="Boxset" value="false" />
                    <input type="checkbox" id="Boxset" name="Boxset" class="form-check-input" @(Model.Boxset ? "checked" : "") />
                    <label class="form-label text-light" for="Boxset" class="form-check-label">Boxset</label>
                </div>
            </div>
        </div>

        <div class="row mb-3">
            <!-- Limited Edition -->
            <div class="col-md-6">
                <div class="form-check">
                    <!-- Hidden field to ensure a value is submitted when checkbox is unchecked -->
                    <input type="hidden" name="LimitedEdition" value="false" />
                    <input type="checkbox" id="LimitedEdition" name="LimitedEdition" class="form-check-input" @(Model.LimitedEdition ? "checked" : "") />
                    <label class="form-label text-light" for="LimitedEdition" class="form-check-label">Limited Edition</label>
                </div>
            </div>

            <!-- Limited Edition Number -->
            <div class="col-md-6">
                <label class="form-label text-light" for="LimitedEditioNo">Limited Edition Number</label>
                <input type="text" id="LimitedEditioNo" name="LimitedEditioNo" class="form-control" value="@Model.LimitedEditioNo" />
            </div>
        </div>

        <div class="row align-items-center mb-3">
            <!-- Current Album Cover -->
            <div class="col-md-3">
                <div class="me-3 p-1">
                    <img src="m.CoverUrl" class="d-block border border-info rounded" style="width:120px; height:120px;" />
                </div>
            </div>

            <!-- Change Album Cover -->
            <div class="col-md-3">
                <label class="form-label text-light" for="CoverImage">Album Cover</label>
                <input type="file" id="CoverImage" name="CoverImage" class="form-control" />
            </div>
        </div>

        <div class="row mb-3">
            <!-- Date Purchased -->
            <div class="col-md-6">
                <label class="form-label text-light" for="DatePurchased">Date Purchased</label>
                <input type="number" id="DatePurchased" name="DatePurchased" class="form-control" value="@Model.DatePurchased" />
            </div>
        </div>

        <div class="row mb-3">
            <!-- Notes -->
            <div class="col-md-6">
                <label class="form-label text-light" for="Notes">Notes</label>
                <textarea id="Notes" name="Notes" class="form-control">@Model.Notes</textarea>
            </div>
        </div>

        <div class="row">
            <!-- Update Button -->
            <div class="col-md-3">
                <button type="submit" class="btn btn-custom-edit">Update</button>
            </div>
        </div>
    </form>
</div>